# 出題意図

この問題は、APIクライアントのリファクタリングを通じて、外部APIとの通信を扱う際のベストプラクティスを学習することを目的としています。

## 適用されたテーマ

1. **クラスの抽出** - Refactoring, Practical Software Engineering
   - WeatherFormatterクラスを抽出してフォーマット責任を分離
   - 各クラスが明確な責任を持つ

2. **ガード節** - Tidy First?
   - パラメータ検証を早期に行い、無効な値で早期リターン
   - ネストを減らして読みやすさを向上

3. **DRY原則** - プリンシプル オブ プログラミング
   - HTTPリクエストとレスポンス処理の共通化
   - エラーハンドリングの一元化

4. **データ駆動型設計** - Code Complete
   - ERROR_MESSAGESハッシュでエラーメッセージを管理
   - 条件分岐をデータ参照に置き換え

5. **メソッドの抽出** - Refactoring
   - 大きなメソッドを小さな、目的が明確なメソッドに分割
   - build_uri, fetch_response, parse_responseなど

6. **名前付き定数** - Code Complete
   - BASE_URLでAPIのベースURLを管理
   - 変更が容易で意図が明確

7. **ポリモーフィズム的なアプローチ** - メタプログラミングRuby
   - format_currentとformat_forecastで異なるフォーマット処理
   - 同じインターフェースで異なる振る舞いを実現

8. **単一責任の原則 (SRP)** - プリンシプル オブ プログラミング
   - API通信とデータフォーマットを別クラスに分離
   - 各メソッドが1つの明確な責任を持つ

9. **テンプレートメソッドパターン** - Design Patterns
   - make_requestメソッドがテンプレートメソッドの役割
   - 共通のアルゴリズムを定義し、サブクラスでステップをオーバーライド

10. **適切な例外処理** - プリンシプル オブ プログラミング
    - 例外を適切なレベルでキャッチ
    - ユーザーに分かりやすいエラーメッセージを返す