# 出題意図

この問題は、通知システムのリファクタリングを通じて、ファクトリパターン、テンプレートメソッドパターン、非同期処理の実装を学習することを目的としています。

## 適用されたテーマ

1. **ファクトリパターン** - Design Patterns
   - NotificationChannelFactoryで通知チャネルの生成を一元化
   - タイプに基づいて適切なクラスをインスタンス化

2. **テンプレートメソッドパターン** - Design Patterns
   - NotificationChannel基底クラスで共通のアルゴリズムを定義
   - サブクラスで具体的な実装を提供

3. **ストラテジーパターン** - Design Patterns
   - 各通知チャネルが異なる配信戦略を実装
   - 実行時に適切な戦略を選択

4. **データ駆動型テンプレート** - Code Complete
   - TEMPLATESハッシュでメッセージテンプレートを管理
   - コードからメッセージ内容を分離

5. **非同期処理** - Practical Software Engineering
   - Sidekiqを使用したバックグラウンドジョブ
   - 大量通知のパフォーマンス向上

6. **DRY原則** - プリンシパル オブ プログラミング
   - ログ記録処理をNotificationLoggerに一元化
   - メッセージ生成ロジックの共通化

7. **Tell, Don't Ask原則** - プリンシパル オブ プログラミング
   - can_send?メソッドで送信可否をカプセル化
   - present?メソッドを使用した存在チェック

8. **オープンクローズド原則 (OCP)** - Code Complete
   - 新しい通知タイプの追加が容易
   - 既存コードを変更せずに拡張可能

9. **エラーハンドリング** - プリンシパル オブ プログラミング
   - バルク送信時の個別エラーを適切に処理
   - 1つの失敗が全体に影響しない

10. **メタプログラミングの活用** - メタプログラミングRuby
    - transform_valuesやdigメソッドの活用
    - 文字列補間でテンプレート変数を展開